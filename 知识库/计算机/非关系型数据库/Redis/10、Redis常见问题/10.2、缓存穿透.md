> 标签： #Redis #Redis常见问题 #Redis面试问题

> 问题描述

Redis中key 对应的数据在数据库并不存在，每次针对此 key 的请求从缓存获取不到，请求都会压到数据库，一旦请求大量涌入，可能导致数据库崩溃

> 问题现象

-   应用服务器压力变大甚至宕机
-   Redis命中率降低
-   一直查询数据库，导致数据库压力增大甚至宕机

![[Pasted image 20230413174809.png]]

> 解决方案

-   对空值缓存：如果一个查询返回的数据为空(不管是数据是否不存在)，仍然把这个空结果进行缓存，设置空结果的过期时间会很短
-   设置可访问的白名单：使用 Bitmap定义一个可以访问的名单，名单ID作为 Bitmap的偏移量，每次访问和 Bitmap 里面的 id 进行比较，如果不在 Bitmap 里面，进行拦截
-   采用布隆过滤器：布隆过滤器(Bloom Filter)是1970 年由布隆提出的，它实际上是一个很长的二进制向量(位图)和一系列随机映射函数(哈希函数)，布隆过滤器可以用于判断一个元系是否在一个集合中。它的优点是空间效率和查询时间都远远超过一般的算法，缺点是有一定的误识别率和删除困难，将所有可能存在的数据哈希到一个足够大的 Bitmap 中，一定不存在的数据会被拦截掉，从而避免了对底层存储系统的查询压力。
-   进行实时监控：当发现 Redis 的命中率开始急速降低，需要排查访问对象和访问的数据，和运维人员配合，可以设置黑名单限制服务